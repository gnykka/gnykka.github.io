<html lang="ru"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><title>Хроника пожара в офисе на Лесной</title><link rel="icon" type="image/png" href="/favicon.b50e6dc6.ico"><link rel="stylesheet" href="/index.90190e61.css"><link rel="stylesheet" href="/fire.48ed772d.css"><script src="/fire.228845ae.js" async></script><script src="/fire.8bcac32f.js" defer></script><script src="/index.a2fda9f9.js"></script></head><body> <header class="flex"> <a href="/" class="logo">avito.tech</a> <button class="up-btn">↑&nbsp;наверх&nbsp;↑</button> </header> <main> <div class="news-header"> <div class="art" id="canvasContainer"></div> <div class="index">#1</div> <div class="flex"> <div class="title">Хроника пожара в офисе на Лесной</div> <div class="subtitle">Ликвидировали возгорание и восстановили работу серверной без последствий</div> </div> </div> <div class="fire-texts scroll-texts"> <div class="cover cover-1"></div> <div class="breakpoint"> 16 декабря в <span class="yellow">14:30</span> в офисе на Лесной сработала пожарная тревога. </div> <div class="breakpoint"> Пока все эвакуировались, команда дата-центра получила информацию, что проблема в серверной на <span class="blue">15</span> этаже. </div> <div class="breakpoint small-margin"> Когда ребята поднялись туда, то увидели, что сотрудники обслуживающей компании бизнес-центра вскрывают помещение. </div> <div class="centered"> <img src="/alert.48e04af9.png"> Это было первой ошибкой. </div> <div class="breakpoint"> После срабатывания датчиков автоматически запустилась система пожаротушения, которая опустошила баллон со специальной газовой смесью за 2,5 секунды. <br><br> Задача этой смеси — связать кислород и остановить горение, но на это требуется до <span class="red">8 минут</span>. Открывать помещение в это время нельзя. </div> <div class="breakpoint"> После вскрытия серверной увидели очаг возгорания: это был <b>источник бесперебойного питания (ИБП)</b>. </div> <div class="breakpoint"> От принесённых нашей командой углекислотных огнетушителей сотрудники управляющей компании отказались. Они стали заливать ИБП <b>порошковыми огнетушителями</b>. </div> <div class="breakpoint small-margin"> И израсходовали <span class="red">15</span> штук! </div> <div class="centered"> <img src="/alert.48e04af9.png"> Это было второй ошибкой. </div> <div class="breakpoint"> Ситуация была бы хуже, если бы мы ждали <b>graceful shutdown</b> — штатного выключения, когда все системы плавно завершают свою работу, дописывают логи, заканчивают выполняемые задачи и записи в базу. </div> <div class="breakpoint empty-block-margin"> К счастью, перед началом тушения мы решили <b>экстренно выключить питание всей серверной</b>. Это спасло оборудование от поглощения большого количества тушащего порошка, который мог привести к перегреву и замыканию. </div> <div class="breakpoint empty-block empty-block-margin"></div> <div class="breakpoint empty-block-margin"> Спасатели МЧС приехали, посмотрели на плоды нашей работы, пришли к выводу, что им здесь делать больше нечего, и <b>уехали спасать других</b>. </div> <div class="breakpoint empty-block empty-block-margin"></div> <div class="breakpoint"> В серверной 15 этажа живёт разное офисное оборудование: <ul> <li>главный Wi-Fi контроллер офиса,</li> <li>ядро офисной сети,</li> <li>видео в офисе,</li> <li>оборудование всех переговорок и звонилок,</li> <li>серверы 1С, виртуальных рабочих столов налогового мониторинга и бэкапов.</li> </ul> </div> <div class="breakpoint"> Медитация по последствиям привела к составлению чёткого плана по дальнейшему восстановлению сервисов. </div> <div class="breakpoint"> Команда Телефонии <b>вернула доступность ЦКС и ASD</b>: наши пользователи снова смогли звонить в поддержку и своим менеджерам. </div> <div class="breakpoint"> Системные администраторы Shared Services <b>возобновили работу виртуальных рабочих мест</b> для тех работников поддержки, которые работают в наших системах со своих домашних компьютеров, а не с выданных ноутбуков. </div> <div class="breakpoint"> Network team <b>подняла офисный VPN и вернула в работу каналы связи</b>. </div> <div class="breakpoint small-margin"> Всё это было организовано большой командой профессионалов, которые «на коленках» придумывали новые схемы работы и активировали запасные. </div> <div> Серверное помещение всё ещё было выключено и находилось в плачевном состоянии, но <b>неработающими оставались только базы 1С</b>. </div> <div class="breakpoint centered small-margin"> <img src="/clock.1010654a.png"> 6 часов после инцидента </div> <div> Начали работы по восстановлению серверного помещения. <br><br><b>Заменили газовый баллон пожаротушения</b>. </div> <div class="breakpoint small-margin"> <b>Начали мойку помещения</b> с обеспыливанием и продувкой всего оборудования. Мыли 7 раз, пылесосили 4 раза, продували всё оборудование 3 раза. </div> <div> Для удаления газа, пыли и следов горения <b>подключили специальные технические средства</b> газодымоудаления. </div> <div class="breakpoint"> <b>Нашли подрядчиков</b>, которые в ночи выехали к нам на аварийные работы по отключению утраченного ИБП и перемещению туда рабочего из серверной 13 этажа. </div> <div class="breakpoint centered small-margin"> <img src="/clock.1010654a.png"> 12 часов после инцидента </div> <div class="small-margin"> Примерно к двум часам ночи <b>сбросили пароль от сервера</b> с мастер-базой 1С и <b>нашли нужные диски</b> с данными. </div> <div> Чуть позже <b>сбросили пароль на втором сервере</b>. Найдя все базы, выдвинулись в сторону дата-центра для подключения этих серверов к остальным базам 1С. </div> <div class="breakpoint"> К <span class="yellow">5:24</span> утра 17 декабря серверы были подключены к остальным. Все сетевые подключения настроены Network team, и всё отдано законным владельцам. <b>Базы 1С вернулись в работу</b>. </div> <div class="breakpoint small-margin"> <b>Согласовали уровень резервирования питания</b> для переключения девбоксов серверной 13 этажа. </div> <div class="small-margin"> <b>Переместили рабочий ИБП</b> на место почившего. </div> <div> В <span class="yellow">6 утра</span> команда направилась спать, чтобы к 10 утра вернуться в бой и <b>запустить на тест</b> перемещённый ИБП. </div> <div class="breakpoint centered small-margin"> <img src="/clock.1010654a.png"> 22 часа после инцидента </div> <div class="small-margin"> В <span class="yellow">11:40</span> питание серверной было восстановлено. </div> <div> Спустя 22 часа 25 минут работа серверной 15 этажа и всех развёрнутых в ней сервисов была полностью восстановлена. </div> <div class="breakpoint empty-block-margin"> <b>Те, кто не спал</b> <br><br>Команда быстрого реагирования: <br>Константин Лукьянов <br>Алексей Клименко <br>Виктор Бурмистров <br><br>Помимо них не сомкнули глаз в полном составе: <br>команда Телефонии, Shared Services, Алексей Жадан, Иван Калуцкий, Вадим Мадисон и Макс Сапронов. Очень сильно вложились в локализацию и решение проблем Network team. <br><br>Всем большой почёт и уважение! </div> </div> <a class="news-next-link" href="/phones.html"> <div class="label">следующая новость</div> <div class="title">Защита телефонных номеров частников</div> <div>Показываем подменный номер телефона вместо настоящего</div> <div class="arrow flex"> <img src="/arrow-yellow.ee88ea76.png"> </div> </a> </main> <footer class="flex"> <div class="flex socials"> <a href="https://www.youtube.com/c/AvitoTech"><img src="/youtube.28d18798.png"></a> <a href="https://habr.com/ru/company/avito/blog"><img src="/habr.8d6963e3.png"></a> <a href="https://vk.com/avitotech"><img src="/vkontakte.e9ee2204.png"></a> <a href="https://twitter.com/AvitoTech"><img src="/twitter.beda25a9.png"></a> <a href="https://t.me/avitotech"><img src="/telegram.36ed1c31.png"></a> <a href="https://github.com/avito-tech"><img src="/github.1af546a5.png"></a> </div> <a class="send-link" href="https://avito.slack.com/team/US50WT0G0">Отправить новость @allesnykh&nbsp;→</a> </footer> </body></html>